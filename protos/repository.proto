syntax = "proto3";
package bentoml;

import "status.proto";


message Bento {
  message BentoServiceEnv {
    string setup_sh = 1;
    string conda_env = 2;
    string pip_dependencies = 3;
  }

  message BentoArtifact {
    string name = 1;
    string artifact_type = 2;
  }

  message BentoServiceApi {
    string name = 1;
    string handler_type = 2;
    string docs = 3;
  }

  string created_at = 1;
  string name = 2;
  string version = 3;
  BentoServiceEnv env = 4;
  repeated BentoArtifact artifacts = 5;
  repeated BentoServiceApi apis = 6;
}

// Requests
message AddBentoRequest {
  string name = 1;
  string version = 2;

  string file_path = 3;
}

message RemoveBentoRequest {
  string bento_name = 1;
  string bento_version = 2;
}

message GetBentoRequest {
  string bento_name = 1;
  string bento_version = 2;
}

message ListBentoRequest {
  string bento_name = 1;
  int32 offset = 2;
  int32 limit = 3;
}

// Responses
message AddBentoResponse {
  Status status = 1;
}

message UploadBentoResponse {
  Status status = 1;
  string file_path = 2;
}

message RemoveBentoResponse {
  Status status = 1;
  Bento bento = 2;
}

message GetBentoResponse {
  Status status = 1;
  Bento bento = 2;
}

message ListBentoResponse {
  Status status = 1;
  repeated Bento bentos = 2;
}