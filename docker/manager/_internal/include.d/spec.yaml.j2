# NOTE: Partially generated by `manager create-manifest`
# * Make sure to edit and changes as fitted.
%YAML 1.2
---
common: &common
  templates_dir: ""
  suffixes: ""
  base_image: ""
  conda: false
  ignore_python:
    -
    -
  header: |
    # syntax = docker/dockerfile:1.3-labs
    #
    # ===========================================
    #
    # THIS IS A GENERATED DOCKERFILE. DO NOT EDIT
    #
    # ===========================================
  envars:
    - LANG=C.UTF-8
    - LC_ALL=C.UTF-8
    - PYTHONDONTWRITEBYTECODE=1
  architectures:
  {% for arch in architectures %}
    - {{ arch }}
  {% endfor %}
  release_types:
  {% for p in release_types %}
    - {{ p }}
  {% endfor %}
  dependencies:
    cuda:
      cuda_url_suffixes: ""
      {% set arch = unpack_include(cuda_mapping, indent=6) %}
      {{ arch }}

docker.io:
  user: "DOCKER_USER" 
  password: "DOCKER_PASSWORD"
  url: "DOCKER_REGISTRY"

w_cuda_v{{ cuda_version }}:
{% for k in supported_distros %}
  {{ k }}:
    <<: *common
    architectures:
{% for arch in architecture_per_distros[k] %}
      - {{ arch }}
{% endfor %}
    templates_dir: {{ templates_entries[k] }}
    suffixes: {{ k }}
    {% if k in cuda_architecture_per_distro %}
    dependencies:
      cuda:
        {% if "debian" in k %}
        cuda_url_suffixes: "ubuntu2004"
        {% else %}
        cuda_url_suffixes: {{ k }}
        {% endif %}
        {% set cuda_arch = contains_key(cuda_architecture_per_distro[k], cuda_mapping) %}
        {% set arch = unpack_include(cuda_arch, indent=8) %}
        {{ arch }}
    {% else %}
    dependencies: null
    {% endif %}
{% endfor %}


