{% if emphemeral != True %}
## Latest tags for `{{ bentoml_package }} {{ bentoml_release_version }}`

{% for distros, tag_list in tag_ref.items() %}
    {% set supported_arch = supported[distros] %}

    {%- set distro_string = distros.strip('0123456789') %}
    {% set distro_string_len = distro_string | length %}
    {% set distro_version = distros[distro_string_len:] %}

    {%- if "ubi" in distro_string %}
        {% set distro_string = distro_string.upper() %}
    {% endif %}
    {% if "alpine" in distros %}
        {% set distro_version = distro_string[-2:] + distro_version %}
        {% set distro_string = 'alpine' %}
    {% endif %}

    {%- set formatted_arch = [] %}
    {% for arch in supported_arch %}
        {% set formatted = "_{}_".format(arch) %}
        {% if formatted not in formatted_arch %}
            {% do formatted_arch.append(formatted) %}
        {% endif %}
    {% endfor %}

    {%- set tags_path = tag_ref[distros] %}
    {% print"\n### " %}{% print distro_string %} {% print distro_version %} [ {{ formatted_arch | join(", ") }} ]{% print "\n\n" %}
    {% for (tag, path) in tags_path %}
        {% if bentoml_package in tag %}
        {% set tagname = tag.split(':')[1] %}
        {% print "- [`" %}{% print tagname %}{% print "`](https://github.com/bentoml/BentoML/tree/main/docker/generated" %}{% print path %}{% print ")\n" %}
        {% endif %}
    {% endfor %}
{% endfor %}
{% endif %}
